<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeLink - National Healthcare Coordination Network</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Emergency SOS Button (Fixed) -->
    <button class="sos-btn" id="emergencyBtn">
        <i class="fas fa-cross"></i>
        <span>SOS</span>
    </button>

    <!-- Emergency Modal -->
    <div id="emergencyModal" class="modal">
        <div class="modal-content emergency-modal">
            <div class="modal-header emergency">
                <h2><i class="fas fa-bell"></i> Emergency Assistance</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="emergency-stepper">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <span>Location</span>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <span>Emergency Type</span>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <span>Symptoms</span>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <span>Confirm</span>
                    </div>
                </div>

                <div class="step-content active" data-step="1">
                    <h3><i class="fas fa-map-marker-alt"></i> Share Your Location</h3>
                    <p>We need your location to dispatch help quickly.</p>
                    <button class="btn btn-primary location-btn" id="getLocation">
                        <i class="fas fa-location-arrow"></i> Get My Location
                    </button>
                    <div class="location-display" id="locationDisplay">
                        <!-- Location will be displayed here -->
                    </div>
                    <div class="phone-input">
                        <label for="emergencyPhone"><i class="fas fa-phone"></i> Contact Phone Number</label>
                        <input type="tel" id="emergencyPhone" placeholder="Enter 10-digit mobile number">
                    </div>
                </div>

                <div class="step-content" data-step="2">
                    <h3><i class="fas fa-stethoscope"></i> Type of Emergency</h3>
                    <div class="emergency-grid">
                        <div class="emergency-option" data-type="cardiac">
                            <i class="fas fa-heartbeat"></i>
                            <span>Cardiac Emergency</span>
                            <small>Heart attack, chest pain</small>
                        </div>
                        <div class="emergency-option" data-type="stroke">
                            <i class="fas fa-brain"></i>
                            <span>Stroke</span>
                            <small>Facial drooping, weakness</small>
                        </div>
                        <div class="emergency-option" data-type="trauma">
                            <i class="fas fa-car-crash"></i>
                            <span>Trauma/Accident</span>
                            <small>Injury, bleeding</small>
                        </div>
                        <div class="emergency-option" data-type="respiratory">
                            <i class="fas fa-lungs"></i>
                            <span>Breathing Difficulty</span>
                            <small>Shortness of breath</small>
                        </div>
                        <div class="emergency-option" data-type="burn">
                            <i class="fas fa-fire"></i>
                            <span>Severe Burns</span>
                            <small>Thermal/chemical burns</small>
                        </div>
                        <div class="emergency-option" data-type="other">
                            <i class="fas fa-plus-circle"></i>
                            <span>Other Emergency</span>
                            <small>Specify below</small>
                        </div>
                    </div>
                    <div class="additional-info">
                        <label for="additionalDetails"><i class="fas fa-info-circle"></i> Additional Information</label>
                        <textarea id="additionalDetails" placeholder="Describe what happened, number of people involved, etc." rows="3"></textarea>
                    </div>
                </div>

                <div class="step-content" data-step="3">
                    <h3><i class="fas fa-clipboard-list"></i> Select Symptoms</h3>
                    <div class="symptoms-grid">
                        <!-- Symptoms will be dynamically loaded -->
                    </div>
                </div>

                <div class="step-content" data-step="4">
                    <h3><i class="fas fa-check-circle"></i> Confirm Emergency</h3>
                    <div class="confirmation-details">
                        <!-- Details will be dynamically populated -->
                    </div>
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>After submitting, emergency services will be notified and you'll receive real-time updates.</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="prevStep">Back</button>
                <button class="btn btn-primary" id="nextStep">Next</button>
                <button class="btn btn-danger" id="submitEmergency" style="display: none;">
                    <i class="fas fa-paper-plane"></i> Submit Emergency
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                    <span>LifeLink</span>
                </div>
                <div class="nav-tagline">National Healthcare Coordination Network</div>
            </div>
            
            <div class="nav-menu">
                <a href="#" class="nav-link active"><i class="fas fa-home"></i> Dashboard</a>
                <a href="#" class="nav-link"><i class="fas fa-user-injured"></i> Patients</a>
                <a href="#" class="nav-link"><i class="fas fa-hospital"></i> Hospitals</a>
                <a href="#" class="nav-link"><i class="fas fa-tint"></i> Blood Network</a>
                <a href="#" class="nav-link"><i class="fas fa-chart-line"></i> Analytics</a>
                <a href="#" class="nav-link"><i class="fas fa-cog"></i> Settings</a>
            </div>

            <div class="nav-user">
                <div class="user-profile">
                    <img src="https://ui-avatars.com/api/?name=John+Doe&background=1976d2&color=fff" alt="User">
                    <div class="user-info">
                        <span class="user-name">Dr. John Doe</span>
                        <span class="user-role">Cardiologist</span>
                    </div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="notifications">
                    <i class="fas fa-bell"></i>
                    <span class="notification-count">3</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <div class="welcome-section">
                <h1>Healthcare Coordination Dashboard</h1>
                <p>Real-time monitoring and management of national healthcare resources</p>
            </div>
            <div class="stats-summary">
                <div class="stat-card">
                    <i class="fas fa-ambulance"></i>
                    <div>
                        <h3>24</h3>
                        <p>Active Emergencies</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-bed"></i>
                    <div>
                        <h3>1,234</h3>
                        <p>Available Beds</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-tint"></i>
                    <div>
                        <h3>42</h3>
                        <p>Blood Requests</p>
                    </div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-user-md"></i>
                    <div>
                        <h3>156</h3>
                        <p>Online Doctors</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Left Column -->
            <div class="column">
                <!-- Emergency Map -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-map-marked-alt"></i> Emergency Response Map</h2>
                        <div class="card-actions">
                            <button class="btn-icon"><i class="fas fa-sync-alt"></i></button>
                            <button class="btn-icon"><i class="fas fa-expand"></i></button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div id="map" style="height: 400px; border-radius: 8px;"></div>
                        <div class="map-legend">
                            <div><span class="legend-dot critical"></span> Critical Emergency</div>
                            <div><span class="legend-dot urgent"></span> Urgent Emergency</div>
                            <div><span class="legend-dot hospital"></span> Hospital</div>
                            <div><span class="legend-dot ambulance"></span> Ambulance</div>
                        </div>
                    </div>
                </div>

                <!-- Active Emergencies -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-exclamation-triangle"></i> Active Emergencies</h2>
                        <span class="badge badge-danger">24 Active</span>
                    </div>
                    <div class="card-body">
                        <div class="emergency-list">
                            <div class="emergency-item critical">
                                <div class="emergency-icon">
                                    <i class="fas fa-heartbeat"></i>
                                </div>
                                <div class="emergency-details">
                                    <h4>Cardiac Arrest</h4>
                                    <p><i class="fas fa-map-marker-alt"></i> 1.2km away</p>
                                    <p><i class="fas fa-clock"></i> 2 minutes ago</p>
                                </div>
                                <div class="emergency-status">
                                    <span class="status-badge dispatched">Ambulance Dispatched</span>
                                    <span class="time-remaining">ETA: 4min</span>
                                </div>
                            </div>
                            <div class="emergency-item urgent">
                                <div class="emergency-icon">
                                    <i class="fas fa-car-crash"></i>
                                </div>
                                <div class="emergency-details">
                                    <h4>Road Accident</h4>
                                    <p><i class="fas fa-map-marker-alt"></i> 3.5km away</p>
                                    <p><i class="fas fa-clock"></i> 5 minutes ago</p>
                                </div>
                                <div class="emergency-status">
                                    <span class="status-badge en-route">En Route</span>
                                    <span class="time-remaining">ETA: 8min</span>
                                </div>
                            </div>
                            <div class="emergency-item routine">
                                <div class="emergency-icon">
                                    <i class="fas fa-lungs"></i>
                                </div>
                                <div class="emergency-details">
                                    <h4>Respiratory Distress</h4>
                                    <p><i class="fas fa-map-marker-alt"></i> 2.1km away</p>
                                    <p><i class="fas fa-clock"></i> 10 minutes ago</p>
                                </div>
                                <div class="emergency-status">
                                    <span class="status-badge pending">Awaiting Dispatch</span>
                                    <span class="time-remaining">--</span>
                                </div>
                            </div>
                        </div>
                        <button class="btn btn-outline btn-block">View All Emergencies</button>
                    </div>
                </div>
            </div>

            <!-- Middle Column -->
            <div class="column">
                <!-- Blood Donation Network -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-tint"></i> Blood Resource Network</h2>
                        <div class="card-actions">
                            <button class="btn btn-sm btn-primary"><i class="fas fa-plus"></i> New Request</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="blood-inventory">
                            <h3><i class="fas fa-chart-pie"></i> Current Inventory</h3>
                            <div class="blood-grid">
                                <div class="blood-type o-positive">
                                    <div class="blood-label">O+</div>
                                    <div class="blood-level">
                                        <div class="level-bar" style="width: 45%"></div>
                                    </div>
                                    <div class="blood-info">
                                        <span>124 units</span>
                                        <small>45% capacity</small>
                                    </div>
                                </div>
                                <div class="blood-type o-negative critical">
                                    <div class="blood-label">O-</div>
                                    <div class="blood-level">
                                        <div class="level-bar" style="width: 15%"></div>
                                    </div>
                                    <div class="blood-info">
                                        <span>18 units</span>
                                        <small class="critical">CRITICAL</small>
                                    </div>
                                </div>
                                <div class="blood-type a-positive">
                                    <div class="blood-label">A+</div>
                                    <div class="blood-level">
                                        <div class="level-bar" style="width: 65%"></div>
                                    </div>
                                    <div class="blood-info">
                                        <span>210 units</span>
                                        <small>65% capacity</small>
                                    </div>
                                </div>
                                <div class="blood-type b-negative">
                                    <div class="blood-label">B-</div>
                                    <div class="blood-level">
                                        <div class="level-bar" style="width: 30%"></div>
                                    </div>
                                    <div class="blood-info">
                                        <span>45 units</span>
                                        <small>30% capacity</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="blood-requests">
                            <h3><i class="fas fa-bell"></i> Active Blood Requests</h3>
                            <div class="requests-list">
                                <div class="request-item urgent">
                                    <div class="request-type">
                                        <i class="fas fa-tint"></i>
                                        <span>O-</span>
                                    </div>
                                    <div class="request-details">
                                        <h4>City General Hospital</h4>
                                        <p><i class="fas fa-clock"></i> Needed within 2 hours</p>
                                        <p><i class="fas fa-user-injured"></i> Trauma patient - 4 units</p>
                                    </div>
                                    <div class="request-actions">
                                        <button class="btn btn-sm btn-danger">Donate</button>
                                        <span class="distance">3.2km</span>
                                    </div>
                                </div>
                                <div class="request-item critical">
                                    <div class="request-type">
                                        <i class="fas fa-tint"></i>
                                        <span>AB-</span>
                                    </div>
                                    <div class="request-details">
                                        <h4>Memorial Medical Center</h4>
                                        <p><i class="fas fa-clock"></i> Needed immediately</p>
                                        <p><i class="fas fa-user-injured"></i> Surgery - 2 units</p>
                                    </div>
                                    <div class="request-actions">
                                        <button class="btn btn-sm btn-danger">Donate</button>
                                        <span class="distance">5.7km</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-outline btn-block">View All Requests</button>
                        </div>
                    </div>
                </div>

                <!-- Hospital Resources -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-hospital"></i> Hospital Capacity</h2>
                        <select class="hospital-filter">
                            <option>All Hospitals</option>
                            <option>Within 10km</option>
                            <option>Specialized Centers</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <div class="hospital-list">
                            <div class="hospital-item">
                                <div class="hospital-icon">
                                    <i class="fas fa-hospital"></i>
                                </div>
                                <div class="hospital-details">
                                    <h4>City General Hospital</h4>
                                    <div class="hospital-resources">
                                        <div class="resource">
                                            <i class="fas fa-bed"></i>
                                            <span>ICU: 4/12</span>
                                            <div class="resource-bar">
                                                <div class="bar-fill" style="width: 33%"></div>
                                            </div>
                                        </div>
                                        <div class="resource">
                                            <i class="fas fa-procedures"></i>
                                            <span>General: 45/120</span>
                                            <div class="resource-bar">
                                                <div class="bar-fill" style="width: 38%"></div>
                                            </div>
                                        </div>
                                        <div class="resource">
                                            <i class="fas fa-wind"></i>
                                            <span>Ventilators: 8/20</span>
                                            <div class="resource-bar">
                                                <div class="bar-fill" style="width: 40%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="hospital-distance">
                                    <i class="fas fa-map-marker-alt"></i>
                                    2.3km
                                </div>
                            </div>
                            <!-- More hospital items -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="column">
                <!-- Patient Management -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-user-injured"></i> Patient Management</h2>
                        <button class="btn btn-sm btn-primary"><i class="fas fa-plus"></i> Add Patient</button>
                    </div>
                    <div class="card-body">
                        <div class="patient-search">
                            <input type="text" placeholder="Search patients..." class="search-input">
                            <i class="fas fa-search"></i>
                        </div>
                        <div class="patient-list">
                            <div class="patient-item">
                                <div class="patient-avatar">
                                    <img src="https://ui-avatars.com/api/?name=Sarah+Johnson&background=4caf50&color=fff" alt="Patient">
                                </div>
                                <div class="patient-info">
                                    <h4>Sarah Johnson</h4>
                                    <p><i class="fas fa-heartbeat"></i> Diabetes Type 2</p>
                                    <p><i class="fas fa-clock"></i> Last visit: 2 days ago</p>
                                </div>
                                <div class="patient-status">
                                    <span class="status-badge stable">Stable</span>
                                    <button class="btn-icon"><i class="fas fa-ellipsis-v"></i></button>
                                </div>
                            </div>
                            <!-- More patient items -->
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
                    </div>
                    <div class="card-body">
                        <div class="quick-actions-grid">
                            <button class="quick-action">
                                <i class="fas fa-video"></i>
                                <span>Video Consult</span>
                            </button>
                            <button class="quick-action">
                                <i class="fas fa-prescription"></i>
                                <span>E-Prescription</span>
                            </button>
                            <button class="quick-action">
                                <i class="fas fa-file-medical"></i>
                                <span>Add Record</span>
                            </button>
                            <button class="quick-action">
                                <i class="fas fa-ambulance"></i>
                                <span>Dispatch Ambulance</span>
                            </button>
                            <button class="quick-action">
                                <i class="fas fa-chart-bar"></i>
                                <span>Generate Report</span>
                            </button>
                            <button class="quick-action">
                                <i class="fas fa-cogs"></i>
                                <span>System Settings</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-history"></i> Recent Activity</h2>
                    </div>
                    <div class="card-body">
                        <div class="activity-timeline">
                            <div class="activity-item">
                                <div class="activity-icon success">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <div class="activity-details">
                                    <p>Emergency #2456 resolved</p>
                                    <small>2 minutes ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon info">
                                    <i class="fas fa-tint"></i>
                                </div>
                                <div class="activity-details">
                                    <p>Blood request fulfilled - O-</p>
                                    <small>15 minutes ago</small>
                                </div>
                            </div>
                            <div class="activity-item">
                                <div class="activity-icon warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="activity-details">
                                    <p>ICU bed shortage alert</p>
                                    <small>1 hour ago</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Blood Donation Modal -->
        <div id="bloodDonationModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-tint"></i> Blood Donation Request</h2>
                    <span class="close-modal">&times;</span>
                </div>
                <div class="modal-body">
                    <!-- Blood donation form -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <div class="logo">
                    <i class="fas fa-heartbeat"></i>
                    <span>LifeLink</span>
                </div>
                <p>National Healthcare Coordination Network</p>
                <p>Transforming healthcare delivery through real-time coordination</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="#">Dashboard</a>
                <a href="#">Emergency Services</a>
                <a href="#">Blood Donation</a>
                <a href="#">Hospitals</a>
            </div>
            <div class="footer-section">
                <h3>Resources</h3>
                <a href="#">Documentation</a>
                <a href="#">API</a>
                <a href="#">Support</a>
                <a href="#">Privacy Policy</a>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p><i class="fas fa-phone"></i> Emergency: 108</p>
                <p><i class="fas fa-envelope"></i> support@lifelink.gov</p>
                <p><i class="fas fa-map-marker-alt"></i> National Health HQ</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 LifeLink Healthcare Platform. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="server.js"></script>
</body>
</html>